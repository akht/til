# 順列と組み合わせ

## 順列

```
nPr = n(n-1)(n-2)...(n-r+1) = n!/(n-r)!
```

例えば`5P3`なら、
```
5P3 = 5!/2! = (5*4*3*2*1)/(2*1) = 60
```

これは`5P3 = 5*4*3`と処理することができる(5から順に3つ取り出して乗算)


### 問題

> 佐藤、鈴木、高橋、田中、伊藤、山本の６人が並ぶとき、以下の問いに答えよ。

#### 1. 全員の並び方は何通りか？
異なる６人を並べるので、
```
6! = 720通り
```

#### 2. 佐藤と鈴木が隣り合う並び方は何通りか？
佐藤と鈴木をセットにして１つの要素と考えると、５つの異なるものの並びを考えれば良い。
５つの異なるものの並び方は、
```
5! = 120通り
```
佐藤と鈴木の並び方は２通りあるので、結局は
```
5! * 2 = 240通り
```

#### 3. 佐藤と鈴木が隣合わない並び方は何通りか？
全ての並び方から、佐藤と鈴木が隣り合う並び方を引けば良いので
```
6! - (5!*2) = 480通り
```

他の考え方として、まず４人を並べてその間を選ぶと考えることもできる。
△○△○△○△○△（△を選べば隣合わない）
```
4! * 5P2 = 24 * 40 = 480通り
```

#### 4. 佐藤と鈴木が両端にくる並び方は何通りか？
佐藤と鈴木を両端に固定して、残りの４人の並びを考えれば良い。
佐藤と鈴木の両端の配置は、２通りあるので
```
2 * 4! = 48通り
```


## 組み合わせ

```
nCr = n!/r!(n-r)!
```

例えば`5C3`なら
```
5C3 = 5!/3!2! = 10
```

Cには以下の性質がある。
```
nCr = nCn-r
```

つまり
```
5C3 = 5C2
```

「５個の中から３個を選ぶ組み合わせの数」は「５個の中から２個を選ぶ」と等しい。
５個の中から２つを選べば、自動的に残りの３個の組み合わせも決まるため。

### 問題

> 男6人、女2人の中から3人を選ぶとき、以下の総数を求めよ。

#### 1. 組み合わせの総数
8人の中から3人選ぶので
```
8C3 = 8*7*6/3*2*1 = 56通り
```


#### 2. 女子を少なくとも1人選ぶ選び方は何通りか？
全ての選び方から、男のみ選ぶ場合の組み合わせを引けばよい
```
8C3 - 6C3 = 56 - 20 = 36通り
```


#### 3. 男2人、女1人選んで1列に並べる並べ方
男と女からそれぞれ選んだ3人を並べればよい
```
6C2 * 2C1 * 3! = 15 * 2 * 6 = 180通り
```



### 仕切り板を考える系の問題(重複組み合わせ)

重複組み合わせの問題

```
重複組み合わせの公式

n種類のものから重複を許してr個選ぶ場合の数
nHr = n+r-1Cr通り
```

この公式を使わなくても、仕切り板を考えると代替解ける。

#### 例1

> 青，赤，黒の三種類の玉がたくさんある。この中から4つ玉を選ぶときに得られる色のパターンが何通りあるか求めよ。

1色だけ使ってもいいし、3色全部つかってもいい。
４つの玉を〇〇〇〇とし、これを2枚の仕切り板で３つの部分にわけると考える。
つまり、
青赤黒黒 -> 〇|〇|〇〇
青赤赤黒 -> 〇|〇〇|〇
赤黒黒黒 -> |〇|〇〇〇
黒黒黒黒 -> ||〇〇〇〇
のようになるので
結局、４つの玉と2枚の仕切り板(どちらも区別なし)の並びを考えればよい。

```
(4 + 2)! / 4! * 2! = 15通り
```


公式を使うと、
```
3H4 = 6C4 = 15通り
```

#### 例2
> 青，赤，黒の三種類の玉がたくさんある。この中から5つ玉を選ぶときに得られる色のパターンのうち，どの色の玉も一つ以上選ぶものが何通りあるか求めよ。

どの色の玉も一つは選ぶので、残りの2玉の選び方を考えればよい。
つまり、2つの玉と2枚の仕切り板の並びを考えればよいので、
```
(2 + 2)! / 2! * 2! = 6通り
```

または、〇〇〇〇〇のように5個の玉の間に仕切り板を入れると考えると、
玉と玉の間は4か所あって、そこから2箇所を選ぶので
```
4C2 = 6通り
```

公式を使うと、
```
3H2 = 4C2 = 6通り
```



#### 整数解の個数

重複組み合わせの応用として、整数解の個数を求める問題がある。

##### 問題1
> x + y + z + w = 6という方程式について、非負整数解の個数を求めよ

非負整数とは、0と正の整数のこと。
`x + y + z + w = 6`という方程式は、6つの玉を４つにわけることと同義。
解には0もありなので、玉と仕切りの関係は以下のようになる。
〇|〇〇|〇〇|〇 => 1 + 2 + 2 + 1 = 6 を表す
|〇〇〇|〇〇〇| => 0 + 3 + 3 + 0 = 6 を表す
...
つまり、6つの玉と3枚の仕切りの並びを考えればよいので、
```
9! / 6! * 3! = 84通り
```

##### 問題2
> x + y + z + w = 6という方程式について、正の整数解の個数を求めよ

正の整数解なので、0はダメ。
つまり、0個になるような仕切りの入れ方はダメということ。
〇〇〇〇〇〇があるとき、玉と玉の間に仕切りをいれることを考えればよいので、
```
5C3 = 10通り
```
